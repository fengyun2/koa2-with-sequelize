{"version":3,"sources":["../../src/middlewares/response.js"],"names":[],"mappings":"AAAA;;;;;;AAMA;AACA,a;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA;;;AAGA,IAAM,WAAW,SAAX,QAAW,GAAW;AACxB,8FAAO,iBAAM,GAAN,EAAW,IAAX;AACH,gCAAI,IAAJ,GAAW,UAAS,GAAT,EAAc,IAAd,EAAoB,GAApB,EAAyB;AAChC,oCAAI,SAAS;AACT,6CAAS,IADA,EAAb;;AAGA,oCAAI,GAAJ,EAAS;AACL,6CAAS,KAAK,OAAL,CAAa,MAAb,EAAqB,EAAE,MAAM,GAAR,EAArB,CAAT;AACH;AACD,oCAAI,SAAS,CAAT,IAAc,GAAlB,EAAuB;AACnB,6CAAS,KAAK,OAAL,CAAa,MAAb,EAAqB;AAC1B,gDAAQ,GADkB,EAArB,CAAT;;AAGH;AACD,oCAAI,IAAJ,GAAW,yBAAe,MAAf,CAAX;AACH,6BAbD,CADG;;AAgBG,sCAhBH,iEAAP;;AAkBH,CAnBD,C;;;AAsBI,Q,GAAA,Q","file":"response.js","sourcesContent":["/*\r\n * @Author: fengyun2\r\n * @Date:   2016-07-21 11:29:28\r\n * @Last Modified by:   fengyun2\r\n * @Last Modified time: 2016-07-21 11:47:07\r\n */\r\n///<reference path=\"../../typings/index.d.ts\" />\r\n\"use strict\";\r\nvar util = require('util');\r\n\r\n/*\r\n * 定制报文格式\r\n */\r\nconst response = function() {\r\n    return async(ctx, next) => {\r\n        ctx.send = function(res, code, msg) {\r\n            var result = {\r\n                retCode: code\r\n            }\r\n            if (res) {\r\n                result = util._extend(result, { data: res });\r\n            }\r\n            if (code !== 0 && msg) {\r\n                result = util._extend(result, {\r\n                    retMsg: msg\r\n                });\r\n            }\r\n            ctx.body = JSON.stringify(result);\r\n        };\r\n\r\n        await next()\r\n    }\r\n}\r\n\r\nexport {\r\n    response\r\n}"]}