{"version":3,"sources":["../../src/controllers/blogController.js"],"names":[],"mappings":";;AAEA,yD;;AAEA,IAAM,yFAAM,iBAAM,GAAN,EAAW,IAAX;AACF,4BADE,GACK;AACT,mCAAO,IADE;AAET,kCAAM,MAFG;AAGT,mCAAO,WAHE;AAIT,uCAAW,UAJF;AAKT,uCAAW,UALF,EADL;;;AASE,kDAAY,GAAZ,CAAgB,IAAhB,CATF;AAUJ,4BAAI,IAAJ,GAAW;AACP,iCAAK,SADE;AAEP,oCAAQ,CAFD;AAGP,qCAAS,OAHF,EAAX,CAVI;;;AAgBJ,gCAAQ,KAAR;AACA,4BAAI,IAAJ,GAAW;AACP,iCAAK,OADE;AAEP,oCAAQ,YAAI,MAFL;AAGP,qCAAS,YAAI,OAHN,EAAX,CAjBI,8EAAN,yEAAN,C,CAJA;;;;;AA6BA,IAAM,2FAAO,kBAAM,GAAN,EAAW,IAAX;AACL,kCADK,GACQ,EAAE,SAAS,WAAX,EADR;AAEL,8BAFK,GAEI,EAAE,KAAK,CAAP,EAFJ;AAGL,+BAHK,GAGK,EAAE,MAAM,CAAR,EAAW,OAAO,CAAlB,EAHL;;AAKgB,kDAAY,IAAZ,CAAiB,UAAjB,EAA6B,MAA7B,EAAqC,OAArC,CALhB,SAKC,MALD;;AAOsB,kDAAY,UAAZ,CAAuB,IAAvB,EAA6B,UAAC,GAAD,EAAM,KAAN,EAAgB;AACpE,oCAAI,GAAJ,EAAS,QAAQ,KAAR,WAAsB,IAAI,OAA1B;AACT,wCAAQ,GAAR,aAAsB,KAAtB;AACH,6BAH0B,CAPtB,SAOC,YAPD;AAWL,4BAAI,IAAJ,GAAW;AACP,iCAAK,SADE;AAEP,oCAAQ,CAFD;AAGP,qCAAS,OAHF;AAIP,kCAAM,MAJC,EAAX;;AAMA,gCAAQ,GAAR,cAAuB,MAAvB,EAjBK;;AAmBL,gCAAQ,KAAR;AACA,4BAAI,IAAJ,GAAW;AACP,iCAAK,OADE;AAEP,oCAAQ,aAAI,MAFL;AAGP,qCAAS,aAAI,OAHN,EAAX,CApBK;;;;AA2BT,gCAAQ,GAAR,CAAY,GAAZ,EA3BS,iFAAP,4EAAN,C;;;;AA+Be;AACX,YADW;AAEX,cAFW,E","file":"blogController.js","sourcesContent":["///<reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport blogService from '../services/blogService.js';\r\n\r\nconst add = async(ctx, next) => {\r\n    const blog = {\r\n        title: '宝宝',\r\n        slug: '宝宝不哭',\r\n        state: 'published',\r\n        createdBy: 'fengyun2',\r\n        updatedBy: 'fengyun2',\r\n    }\r\n    try {\r\n        await blogService.add(blog);\r\n        ctx.body = {\r\n            tag: 'success',\r\n            status: 1,\r\n            message: '添加成功!'\r\n        };\r\n    } catch (err) {\r\n        console.error(`add error: ${err}`);\r\n        ctx.body = {\r\n            tag: 'error',\r\n            status: err.status,\r\n            message: err.message,\r\n        }\r\n    }\r\n}\r\n\r\nconst list = async(ctx, next) => {\r\n    let conditions = { \"state\": \"published\" };\r\n    let fields = { _id: 0 };\r\n    let options = { skip: 0, limit: 2 };\r\n    try {\r\n        const result = await blogService.list(conditions, fields, options);\r\n\r\n        const resultByName = await blogService.findByName('宝宝', (err, blogs) => {\r\n            if (err) console.error(`err: ${err.message}`);\r\n            console.log(`blogs: ${blogs}`);\r\n        });\r\n        ctx.body = {\r\n            tag: 'success',\r\n            status: 1,\r\n            message: '查询成功!',\r\n            data: result,\r\n        }\r\n        console.log(`result: ${result}`);\r\n    } catch (err) {\r\n        console.error(`list error: ${err}`);\r\n        ctx.body = {\r\n            tag: 'error',\r\n            status: err.status,\r\n            message: err.message,\r\n        }\r\n    }\r\n\r\n    console.log(444)\r\n\r\n}\r\n\r\nexport default {\r\n    add,\r\n    list\r\n}"]}