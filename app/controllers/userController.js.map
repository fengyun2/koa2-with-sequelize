{"version":3,"sources":["../../src/controllers/userController.js"],"names":[],"mappings":";;AAEA,sD;;AAEA;;;;;;AAMA,IAAM,8FAAW,iBAAM,GAAN,EAAW,IAAX;AACP,4BADO,GACA;AACT,kCAAM,UADG;AAET,mCAAO,mBAFE;AAGT,sCAAU,MAHD;AAIT,sCAAU,WAJD,EADA;;;AAQb;AARa;AAUY,kDAAY,QAAZ,CAAqB,IAArB,CAVZ,SAUH,MAVG;;AAYT,4BAAI,IAAJ,GAAW;AACP,iCAAK,SADE;AAEP,oCAAQ,CAFD;AAGP,qCAAS,OAHF;AAIP,kCAAM,MAJC,EAAX,CAZS;;;AAmBT,gCAAQ,KAAR;;AAEA,4BAAI,IAAJ,GAAW;AACP,iCAAK,OADE;AAEP,oCAAQ,YAAI,MAFL;AAGP,qCAAS,YAAI,OAHN,EAAX,CArBS,8EAAX,8EAAN;;;;;AA6BA;;;;6NAvCA;AA4CA,IAAM,4FAAQ,kBAAM,GAAN;AACJ,2BADI,GACE,IAAI,OAAJ,CAAY,KAAZ,CAAkB,EAAlB,IAAwB,EAD1B;AAEV,4BAAI,CAAC,GAAL,EAAU;AACN,gCAAI,IAAJ,GAAW;AACP,qCAAK,OADE;AAEP,wCAAQ,CAAC,CAFF;AAGP,yCAAS,MAHF,EAAX;;AAKH,yBARS;;;AAWF,kCAXE,GAWW,EAAE,KAAK,GAAP,EAXX;AAYA,kDAAY,aAAZ,CAA0B,UAA1B,CAZA;AAaN,4BAAI,IAAJ,GAAW;AACP,iCAAK,SADE;AAEP,oCAAQ,CAFD;AAGP,qCAAS,OAHF,EAAX,CAbM;;;AAmBN,gCAAQ,KAAR;AACA,4BAAI,IAAJ,GAAW;AACP,iCAAK,OADE;AAEP,oCAAQ,aAAI,MAFL;AAGP,qCAAS,aAAI,OAHN,EAAX,CApBM,gFAAR,wEAAN,C;;;;;AA4Be;AACX,sBADW;AAEX,gBAFW,E","file":"userController.js","sourcesContent":["///<reference path=\"../../typings/index.d.ts\" />\n\nimport userService from '../services/userService';\n\n/**\n * [注册]\n * @param  {[type]}   ctx  [description]\n * @param  {Function} next [description]\n * @return {[type]}        [description]\n */\nconst register = async(ctx, next) => {\n    const user = {\n        name: 'fengyun2',\n        email: '1518550424@qq.com',\n        password: 123456,\n        location: 'GuangZhou',\n    };\n\n    // 返回的Promise对象,也可以使用.then().catch()\n    try {\n        const result = await userService.register(user);\n\n        ctx.body = {\n            tag: 'success',\n            status: 1,\n            message: '注册成功!',\n            data: result,\n        }\n    } catch (err) {\n        console.error(`register error: ${err}`);\n\n        ctx.body = {\n            tag: 'error',\n            status: err.status,\n            message: err.message,\n        }\n    }\n};\n\n/**\n * 检查该用户是否已被注册\n * @param  {[type]} ctx [description]\n * @return {[type]}     [description]\n */\nconst check = async(ctx) => {\n    const _id = ctx.request.query.id || '';\n    if (!_id) {\n        ctx.body = {\n            tag: 'error',\n            status: -1,\n            message: '参数缺失',\n        }\n    }\n\n    try {\n        let conditions = { _id: _id };\n        await userService.checkIsExists(conditions);\n        ctx.body = {\n            tag: 'success',\n            status: 1,\n            message: '查询成功!',\n        }\n    } catch (err) {\n        console.error(`check error: ${err}`);\n        ctx.body = {\n            tag: 'error',\n            status: err.status,\n            message: err.message,\n        }\n    }\n};\n\nexport default {\n    register,\n    check,\n}"]}